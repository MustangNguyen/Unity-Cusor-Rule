# Ask Command - PhÃ¢n tÃ­ch váº¥n Ä‘á» Unity

## Má»¥c Ä‘Ã­ch
Khi ngÆ°á»i dÃ¹ng gáº·p váº¥n Ä‘á» Unity, command nÃ y sáº½:
- **Tá»° Äá»˜NG tÃ³m táº¯t** cuá»™c trÃ² chuyá»‡n trÆ°á»›c khi phÃ¢n tÃ­ch
- **KHÃ”NG thá»±c hiá»‡n** báº¥t ká»³ thay Ä‘á»•i code nÃ o
- **Chá»‰ phÃ¢n tÃ­ch** vÃ  Ä‘Æ°a ra giáº£i phÃ¡p
- **Äiá»u tra nguyÃªn nhÃ¢n** gá»‘c rá»…
- **Äá» xuáº¥t phÆ°Æ¡ng Ã¡n** kháº£ thi vá»›i Æ°u/nhÆ°á»£c Ä‘iá»ƒm

## Quy trÃ¬nh thá»±c hiá»‡n

### 0. ğŸ“Š TÃ“M Táº®T CUá»˜C TRÃ’ CHUYá»†N (Báº®T BUá»˜C Äáº¦U TIÃŠN)
- **Tá»± Ä‘á»™ng thá»±c hiá»‡n** `/summarize-chat` trÆ°á»›c khi phÃ¢n tÃ­ch
- **Gom Ã½ chÃ­nh** vÃ  file quan trá»ng tá»« cuá»™c trÃ² chuyá»‡n
- **XÃ¡c Ä‘á»‹nh context** vÃ  váº¥n Ä‘á» Ä‘Ã£ Ä‘Æ°á»£c tháº£o luáº­n
- **Chuáº©n bá»‹ thÃ´ng tin** Ä‘áº§y Ä‘á»§ cho viá»‡c Ä‘iá»u tra
- **TÄƒng hiá»‡u quáº£** phÃ¢n tÃ­ch váº¥n Ä‘á»

### 1. ğŸ” Äiá»u tra nguyÃªn nhÃ¢n (Báº®T BUá»˜C)
- **Sá»­ dá»¥ng thÃ´ng tin** tá»« bÆ°á»›c tÃ³m táº¯t cuá»™c trÃ² chuyá»‡n
- **PhÃ¢n tÃ­ch Unity Console** Ä‘á»ƒ xÃ¡c Ä‘á»‹nh lá»—i
- **Kiá»ƒm tra Inspector** vÃ  component settings
- **XÃ¡c Ä‘á»‹nh script/component** gÃ¢y ra váº¥n Ä‘á»
- **TÃ¬m hiá»ƒu context** vÃ  dependencies
- **KHÃ”NG Ä‘Æ°a ra phÆ°Æ¡ng Ã¡n** cho Ä‘áº¿n khi Ä‘iá»u tra xong

### 2. ğŸ“ XÃ¡c Ä‘á»‹nh vá»‹ trÃ­ váº¥n Ä‘á»
- Script cá»¥ thá»ƒ gÃ¢y lá»—i
- DÃ²ng code cÃ³ váº¥n Ä‘á»
- Component/GameObject liÃªn quan
- **XÃ¡c nháº­n nguyÃªn nhÃ¢n** trÆ°á»›c khi Ä‘á» xuáº¥t fix

### 3. ğŸ’¡ Äá» xuáº¥t phÆ°Æ¡ng Ã¡n (CHá»ˆ SAU KHI ÄIá»€U TRA XONG)

| PhÆ°Æ¡ng Ã¡n | MÃ´ táº£ | âœ… Æ¯u Ä‘iá»ƒm | âš ï¸ NhÆ°á»£c Ä‘iá»ƒm | ğŸ¯ Äá»™ khÃ³ | â±ï¸ Thá»i gian |
|-----------|-------|------------|---------------|-----------|-------------|
| **PhÆ°Æ¡ng Ã¡n 1** | Sá»­a trá»±c tiáº¿p | âœ… Nhanh chÃ³ng âœ… Ãt thay Ä‘á»•i | âš ï¸ CÃ³ thá»ƒ gÃ¢y side effect | ğŸŸ¢ Dá»… | ğŸŸ¢ < 1h |
| **PhÆ°Æ¡ng Ã¡n 2** | Refactor script | âœ… Code sáº¡ch hÆ¡n âœ… Dá»… maintain | âš ï¸ Cáº§n test ká»¹ | ğŸŸ¡ Trung bÃ¬nh | ğŸŸ¡ 2-4h |
| **PhÆ°Æ¡ng Ã¡n 3** | Thay Ä‘á»•i architecture | âœ… Giáº£i quyáº¿t triá»‡t Ä‘á»ƒ | âš ï¸ Thay Ä‘á»•i lá»›n | ğŸ”´ KhÃ³ | ğŸ”´ > 1 ngÃ y |
| **PhÆ°Æ¡ng Ã¡n 4** | Workaround táº¡m thá»i | âœ… Giáº£i quyáº¿t ngay | âš ï¸ KhÃ´ng bá»n vá»¯ng | ğŸŸ¢ Dá»… | ğŸŸ¢ < 30 phÃºt |

### 4. â­ Best Choice
- **PhÆ°Æ¡ng Ã¡n Ä‘Æ°á»£c khuyáº¿n nghá»‹** vá»›i lÃ½ do cá»¥ thá»ƒ
- **Rá»§i ro vÃ  lá»£i Ã­ch** chi tiáº¿t
- **Timeline thá»±c hiá»‡n** vÃ  **dependencies**

### 5. âš ï¸ Rá»§i ro vÃ  cÃ¡ch xá»­ lÃ½
- **CÃ¡c lá»—i cÃ³ thá»ƒ xáº£y ra** khi thá»±c hiá»‡n Best Choice
- **TÃ¡c Ä‘á»™ng phá»¥** Ä‘áº¿n cÃ¡c script/component khÃ¡c
- **CÃ¡ch sá»­a lá»—i** cá»¥ thá»ƒ cho tá»«ng trÆ°á»ng há»£p
- **Checklist kiá»ƒm tra** sau khi thá»±c hiá»‡n

## Unity Troubleshooting

### 1. Console Error Analysis
```csharp
// Common Unity Errors vÃ  cÃ¡ch fix
// NullReferenceException
if (rb != null)
{
    rb.AddForce(Vector3.up * jumpForce);
}

// MissingComponentException
[RequireComponent(typeof(Rigidbody))]
public class PlayerController : MonoBehaviour
{
    private Rigidbody rb;
    
    private void Awake()
    {
        rb = GetComponent<Rigidbody>();
    }
}
```

### 2. Inspector Issues
- Kiá»ƒm tra missing references
- Verify component settings
- Check layer assignments
- Validate tag assignments

### 3. Performance Issues
- Sá»­ dá»¥ng Unity Profiler
- Check for memory leaks
- Analyze draw calls
- Monitor frame rate

## VÃ­ dá»¥ sá»­ dá»¥ng
```
ask: Táº¡i sao player khÃ´ng di chuyá»ƒn Ä‘Æ°á»£c?
ask: Lá»—i NullReferenceException trong PlayerController
ask: Performance cháº­m khi load scene
ask: UI khÃ´ng hiá»ƒn thá»‹ Ä‘Ãºng trÃªn mobile
ask: Audio khÃ´ng phÃ¡t Ä‘Æ°á»£c
ask: Animation khÃ´ng cháº¡y
ask: Physics khÃ´ng hoáº¡t Ä‘á»™ng
ask: Build bá»‹ lá»—i
```

## Káº¿t quáº£ mong Ä‘á»£i
- ğŸ“Š **TÃ³m táº¯t cuá»™c trÃ² chuyá»‡n** (tá»± Ä‘á»™ng thá»±c hiá»‡n)
- ğŸ” **PhÃ¢n tÃ­ch chi tiáº¿t** nguyÃªn nhÃ¢n
- ğŸ® **Unity Console analysis** (náº¿u cÃ³ lá»—i)
- ğŸ“ **XÃ¡c Ä‘á»‹nh vá»‹ trÃ­** váº¥n Ä‘á» cá»¥ thá»ƒ
- ğŸ’¡ **Báº£ng so sÃ¡nh** cÃ¡c phÆ°Æ¡ng Ã¡n
- â­ **Khuyáº¿n nghá»‹** phÆ°Æ¡ng Ã¡n tá»‘t nháº¥t
- âš ï¸ **Cáº£nh bÃ¡o rá»§i ro** vÃ  cÃ¡ch xá»­ lÃ½
- ğŸš« **KHÃ”NG thay Ä‘á»•i** code hay assets

## Unity Commands Reference
Khi sá»­ dá»¥ng `/ask` vá»›i Unity issues, cÃ³ thá»ƒ tham kháº£o cÃ¡c lá»‡nh sau:

### Kiá»ƒm tra Console
```csharp
// Enable console logging
Debug.Log("Debug message");
Debug.LogWarning("Warning message");
Debug.LogError("Error message");

// Conditional logging
#if UNITY_EDITOR
Debug.Log("Editor only message");
#endif
```

### Inspector Debugging
```csharp
// Show values in Inspector
[SerializeField] private bool showDebugInfo = true;

private void OnDrawGizmos()
{
    if (showDebugInfo)
    {
        Gizmos.color = Color.red;
        Gizmos.DrawWireSphere(transform.position, 1f);
    }
}
```

### Performance Debugging
```csharp
// Frame rate monitoring
private void OnGUI()
{
    GUILayout.Label($"FPS: {1.0f / Time.deltaTime:F1}");
    GUILayout.Label($"Memory: {System.GC.GetTotalMemory(false) / 1024f / 1024f:F1} MB");
}
```

## âš ï¸ QUAN TRá»ŒNG: Quy táº¯c Ä‘iá»u tra trÆ°á»›c khi Ä‘Æ°a ra phÆ°Æ¡ng Ã¡n

### 1. **Báº®T BUá»˜C Ä‘iá»u tra ká»¹**:
- PhÃ¢n tÃ­ch Unity Console chi tiáº¿t
- Kiá»ƒm tra Inspector vÃ  component settings
- XÃ¡c Ä‘á»‹nh script/component gÃ¢y lá»—i
- **KHÃ”NG Ä‘Æ°a ra phÆ°Æ¡ng Ã¡n** cho Ä‘áº¿n khi Ä‘iá»u tra xong

### 2. **TrÃ¡nh Ä‘Æ°a ra phÆ°Æ¡ng Ã¡n sai**:
- **VÃ­ dá»¥ sai**: "Script Ä‘Ã£ Ä‘Ãºng" â†’ thá»±c táº¿ cÃ³ lá»—i syntax
- **VÃ­ dá»¥ sai**: "Component Ä‘Ã£ setup" â†’ thá»±c táº¿ missing reference
- **VÃ­ dá»¥ sai**: "Performance OK" â†’ thá»±c táº¿ cÃ³ bottleneck

### 3. **Quy trÃ¬nh Ä‘iá»u tra chuáº©n**:
```
1. PhÃ¢n tÃ­ch Unity Console
2. Kiá»ƒm tra Inspector settings
3. XÃ¡c Ä‘á»‹nh nguyÃªn nhÃ¢n gá»‘c rá»…
4. CHá»ˆ SAU ÄÃ“ má»›i Ä‘Æ°a ra phÆ°Æ¡ng Ã¡n
```

## Prompt máº«u cho AI Agent Chat
```text
Báº¡n lÃ  trá»£ lÃ½ ká»¹ thuáº­t Unity. Nhiá»‡m vá»¥: CHá»ˆ PHÃ‚N TÃCH, KHÃ”NG sá»­a code hay assets.

Bá»‘i cáº£nh:
- Dá»± Ã¡n: Unity game development
- Chuáº©n pháº£n há»“i: Ngáº¯n gá»n, cÃ³ báº£ng phÆ°Æ¡ng Ã¡n, Ä‘á» xuáº¥t Best Choice

YÃªu cáº§u thá»±c hiá»‡n:
0) **Báº®T BUá»˜C tÃ³m táº¯t cuá»™c trÃ² chuyá»‡n** trÆ°á»›c khi phÃ¢n tÃ­ch:
   - Tá»± Ä‘á»™ng thá»±c hiá»‡n /summarize-chat
   - Gom Ã½ chÃ­nh vÃ  file quan trá»ng
   - XÃ¡c Ä‘á»‹nh context vÃ  váº¥n Ä‘á» Ä‘Ã£ tháº£o luáº­n
   - Chuáº©n bá»‹ thÃ´ng tin Ä‘áº§y Ä‘á»§ cho viá»‡c Ä‘iá»u tra

1) **Báº®T BUá»˜C Ä‘iá»u tra ká»¹** trÆ°á»›c khi Ä‘Æ°a ra phÆ°Æ¡ng Ã¡n:
   - Sá»­ dá»¥ng thÃ´ng tin tá»« bÆ°á»›c tÃ³m táº¯t
   - PhÃ¢n tÃ­ch Unity Console chi tiáº¿t
   - Kiá»ƒm tra Inspector vÃ  component settings
   - XÃ¡c Ä‘á»‹nh script/component gÃ¢y lá»—i
   - **KHÃ”NG Ä‘Æ°a ra phÆ°Æ¡ng Ã¡n** cho Ä‘áº¿n khi Ä‘iá»u tra xong

2) **PhÃ¢n tÃ­ch Unity Console** náº¿u cÃ³ lá»—i:
   - Kiá»ƒm tra error messages vÃ  stack traces
   - XÃ¡c Ä‘á»‹nh loáº¡i lá»—i (NullReference, MissingComponent, etc.)
   - PhÃ¢n tÃ­ch nguyÃªn nhÃ¢n gá»‘c rá»…
   - Kiá»ƒm tra component references vÃ  settings

3) XÃ¡c Ä‘á»‹nh vá»‹ trÃ­ váº¥n Ä‘á» (script, component, GameObject, scene).

4) **CHá»ˆ SAU KHI ÄIá»€U TRA XONG** má»›i Ä‘á» xuáº¥t tá»‘i thiá»ƒu 3 phÆ°Æ¡ng Ã¡n (báº£ng: MÃ´ táº£, Æ¯u/nhÆ°á»£c, Äá»™ khÃ³, Thá»i gian).

5) Chá»‰ ra Best Choice + lÃ½ do, rá»§i ro, vÃ  checklist cÃ¡c bÆ°á»›c thá»±c hiá»‡n.

6) **Cáº¢NH BÃO Rá»¦I RO**: Liá»‡t kÃª cÃ¡c lá»—i cÃ³ thá»ƒ xáº£y ra khi thá»±c hiá»‡n Best Choice:
   - Lá»—i compilation khi sá»­a script
   - Lá»—i missing references khi di chuyá»ƒn assets
   - Lá»—i build khi thay Ä‘á»•i settings
   - Lá»—i runtime khi thay Ä‘á»•i logic
   - CÃ¡ch sá»­a tá»«ng loáº¡i lá»—i cá»¥ thá»ƒ

7) Tuyá»‡t Ä‘á»‘i khÃ´ng thay Ä‘á»•i code/assets. Náº¿u cáº§n validate, chá»‰ Ä‘Æ°a lá»‡nh kiá»ƒm tra (khÃ´ng tá»± cháº¡y).

Äáº§u vÃ o:
<dÃ¡n lá»—i/triá»‡u chá»©ng/ngá»¯ cáº£nh á»Ÿ Ä‘Ã¢y>

Äáº§u ra báº¯t buá»™c:
- **TÃ³m táº¯t cuá»™c trÃ² chuyá»‡n** (tá»« bÆ°á»›c 0)
- **Äiá»u tra chi tiáº¿t** nguyÃªn nhÃ¢n gá»‘c rá»…
- **Unity Console analysis** (náº¿u cÃ³ lá»—i)
- Vá»‹ trÃ­ lá»—i (script/component/GameObject náº¿u xÃ¡c Ä‘á»‹nh Ä‘Æ°á»£c)
- **CHá»ˆ SAU KHI ÄIá»€U TRA XONG** má»›i cÃ³ báº£ng phÆ°Æ¡ng Ã¡n so sÃ¡nh
- Best Choice + checklist bÆ°á»›c lÃ m
- **Cáº£nh bÃ¡o rá»§i ro** + cÃ¡ch xá»­ lÃ½ tá»«ng loáº¡i lá»—i
```
